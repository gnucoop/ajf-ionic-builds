{"version":3,"file":"page-slider.es5.js","sources":["../../../src/ionic/page-slider/page-slider-module.ts","../../../src/ionic/page-slider/page-slider.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {AjfPageSliderModule as AjfCorePageSliderModule} from '@ajf/core/page-slider';\n\nimport {AjfPageSlider} from './page-slider';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    AjfCorePageSliderModule\n  ],\n  declarations: [\n    AjfPageSlider\n  ],\n  exports: [\n    AjfCorePageSliderModule,\n    AjfPageSlider\n  ]\n})\nexport class AjfPageSliderModule { }\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfPageSlider as AjfCorePageSlider, AjfPageSliderItem} from '@ajf/core/page-slider';\nimport {AnimationBuilder} from '@angular/animations';\nimport {\n  AfterContentInit, ChangeDetectionStrategy, ChangeDetectorRef, Component,\n  ContentChildren, ElementRef, OnDestroy, Renderer2, ViewChild, ViewEncapsulation\n} from '@angular/core';\nimport {merge, Subscription} from 'rxjs';\nimport {filter, map, startWith, switchMap} from 'rxjs/operators';\n\n@Component({\n  moduleId: module.id,\n  selector: 'ajf-page-slider',\n  templateUrl: 'page-slider.html',\n  styleUrls: ['page-slider.css'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  inputs: ['duration', 'currentPage', 'hideNavigationButtons', 'orientation', 'fixedOrientation'],\n  outputs: ['pageScrollFinish', 'orientationChange'],\n  queries: {\n    pages: new ContentChildren(AjfPageSliderItem),\n    body: new ViewChild('body', {static: true}),\n  },\n})\nexport class AjfPageSlider extends AjfCorePageSlider implements AfterContentInit, OnDestroy {\n  private _scrollSub = Subscription.EMPTY;\n\n  constructor(\n    animationBuilder: AnimationBuilder,\n    cdr: ChangeDetectorRef,\n    renderer: Renderer2,\n    private _el: ElementRef,\n  ) {\n    super(animationBuilder, cdr, renderer);\n  }\n\n  ngAfterContentInit(): void {\n    super.ngAfterContentInit();\n    this._scrollSub = this.pages.changes.pipe(\n      map(() => this.pages.toArray()),\n      startWith(this.pages.toArray()),\n      filter(pages => pages.length > 0),\n      switchMap(pages => merge(...pages.map(page => page.scroll))),\n    ).subscribe(() => {\n      this._fixRippleFromRadioButton();\n      this._fixToggleButtons();\n    });\n  }\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n    this._scrollSub.unsubscribe();\n  }\n\n  private _fixRippleFromRadioButton(): void {\n    try {\n      const el = this._el.nativeElement as HTMLElement;\n      const radioGroups = el.getElementsByTagName('ion-radio-group');\n      const radioGroup = radioGroups[0];\n      const items = radioGroup.getElementsByTagName('ion-item');\n      const item = items[0];\n      const ripples = item.shadowRoot!.firstElementChild!\n        .getElementsByTagName('ion-ripple-effect');\n      const ripple = ripples.item(0) as HTMLIonRippleEffectElement;\n      const orig = ripple.style.opacity;\n      ripple.style.opacity = '0';\n      ripple.addRipple(0, 0).then(remove => {\n        remove();\n        ripple.style.opacity = orig;\n      });\n    } catch (e) { }\n  }\n\n  private _fixToggleButtons(): void {\n    try {\n      const el = this._el.nativeElement as HTMLElement;\n      const toggleButtons = el.getElementsByTagName('ion-toggle');\n      const toggleButtonsNum = toggleButtons.length;\n      for (let i = 0; i < toggleButtonsNum; i++) {\n        const toggleButton = toggleButtons.item(i) as HTMLIonToggleElement;\n        const inners = toggleButton.shadowRoot!.firstElementChild!\n          .getElementsByClassName('toggle-inner');\n        const inner = inners[0] as HTMLDivElement;\n        inner.style.willChange = 'auto';\n      }\n    } catch (e) { }\n  }\n}\n"],"names":["AjfCorePageSliderModule","tslib_1.__extends"],"mappings":"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"}