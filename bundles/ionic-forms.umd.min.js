!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@ajf/core/forms"),require("@angular/core"),require("@ionic/angular"),require("rxjs"),require("rxjs/operators"),require("@ajf/core/common"),require("@ajf/ionic/barcode"),require("@ajf/ionic/calendar"),require("@ajf/ionic/checkbox-group"),require("@ajf/ionic/page-slider"),require("@ajf/ionic/time"),require("@angular/common"),require("@angular/forms"),require("@gic/angular"),require("@ngx-translate/core")):"function"==typeof define&&define.amd?define("@ajf/ionic/forms",["exports","@ajf/core/forms","@angular/core","@ionic/angular","rxjs","rxjs/operators","@ajf/core/common","@ajf/ionic/barcode","@ajf/ionic/calendar","@ajf/ionic/checkbox-group","@ajf/ionic/page-slider","@ajf/ionic/time","@angular/common","@angular/forms","@gic/angular","@ngx-translate/core"],n):n(((e=e||self).ajf=e.ajf||{},e.ajf.ionic=e.ajf.ionic||{},e.ajf.ionic.forms={}),e.ng.core.forms,e.ng.core,e.ionic.angular,e.rxjs,e.rxjs.operators,e.ng.core.common,e.ng.ionic.barcode,e.ng.ionic.calendar,e.ng.ionic.checkboxGroup,e.ng.ionic.pageSlider,e.ng.ionic.time,e.ng.common,e.ng.forms,e.gic.angular,e.ngxTranslate.core)}(this,(function(e,n,t,a,o,r,i,c,l,s,f,d,p,m,g,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var j=function(e,n){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function h(e,n){function t(){this.constructor=e}j(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var y=function(){function e(e){this._alertCtrl=e}return e.prototype.showWarningAlertPrompt=function(e){var n=this;return new o.Observable((function(t){n._alertCtrl.create({header:"Warning",message:e.join("\n"),buttons:[{text:"No",handler:function(){t.next({result:!1}),t.complete()}},{text:"Yes",handler:function(){t.next({result:!0}),t.complete()}}]}).then((function(e){e.present()}))}))},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:a.AlertController}]},e}(),v=function(e){function a(n,t,a){return e.call(this,n,t,a)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<ion-toggle *ngIf="control|async as ctrl" [disabled]="readonly" [formControl]="ctrl!"></ion-toggle>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfBaseFieldComponent),b=function(e){function a(n,t,a){return e.call(this,n,t,a)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<ion-item>\n  <ajf-calendar\n      *ngIf="control|async as ctrl"\n      selectionMode="day"\n      [dateOnlyForDay]="true"\n      [minDate]="instance.node.minDate|ajfDateValue"\n      [maxDate]="instance.node.maxDate|ajfDateValue"\n      [disabled]="readonly"\n      [formControl]="ctrl!"></ajf-calendar>\n</ion-item>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfBaseFieldComponent),C=function(e){function o(n,t,a,o){var r=e.call(this,n,t,a)||this;return r._dvs=o,r}return h(o,e),o.prototype.onChange=function(e){if(null!=this.input&&null!=e.detail){var n=e.detail.value||"";n.length>0&&(null!=this._minDateStr&&n<this._minDateStr||null!=this._maxDateStr&&n>this._maxDateStr)&&(this.input.value="")}},o.prototype._onInstanceChange=function(){this._minDateStr=this._dvs.transform(this.instance.node.minDate),this._maxDateStr=this._dvs.transform(this.instance.node.maxDate)},o.decorators=[{type:t.Component,args:[{template:'<ion-input\n    type="date"\n    *ngIf="control|async as ctrl"\n    [min]="instance.node.minDate|ajfDateValueString"\n    [max]="instance.node.maxDate|ajfDateValueString"\n    [readonly]="readonly"\n    (ionChange)="onChange($event)"\n    [formControl]="ctrl!"></ion-input>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y},{type:n.AjfDateValueStringPipe}]},o.propDecorators={input:[{type:t.ViewChild,args:[a.IonInput,{static:!1}]}]},o}(n.AjfBaseFieldComponent),I=function(e){function a(n,t,a){return e.call(this,n,t,a)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<div [innerHTML]="instance.node.HTML"></div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfBaseFieldComponent),S=function(e){function a(n,t,a){return e.call(this,n,t,a)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<ajf-barcode *ngIf="control|async as ctrl" [formControl]="ctrl!" [readonly]="readonly"></ajf-barcode>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfBaseFieldComponent),x=function(e){function i(n,a,i){var c=e.call(this,n,a,i)||this;c._onChangeEvt=new t.EventEmitter,c._onChangeSub=o.Subscription.EMPTY;var l=c.control.pipe(r.filter((function(e){return null!=e})));return c._onChangeSub=l.pipe(r.switchMap((function(e){return c._onChangeEvt.pipe(r.map((function(n){return{control:e,value:n}})))}))).subscribe((function(e){var n=e.control,t=e.value;try{t=parseFloat(t)}catch(e){}n.setValue(t)})),c.value=c.control.pipe(r.filter((function(e){return null!=e})),r.switchMap((function(e){return e.valueChanges.pipe(r.startWith(e.value))}))),c}return h(i,e),i.prototype.ngOnDestroy=function(){this._onChangeEvt.complete(),this._onChangeSub.unsubscribe()},i.prototype.onChange=function(e){null!=e.detail&&this._onChangeEvt.emit(e.detail.value)},i.decorators=[{type:t.Component,args:[{template:'<ion-input type="text" [readonly]="true" [value]="value|async" (ionChange)="onChange($event)"></ion-input>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],i.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},i.propDecorators={input:[{type:t.ViewChild,args:[a.IonInput,{static:!0}]}]},i}(n.AjfBaseFieldComponent),F=function(e){function a(n,t,a){return e.call(this,n,t,a)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<ion-input *ngIf="control|async as ctrl" [type]="type" [formControl]="ctrl!" [attr.disabled]="readonly"></ion-input>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfInputFieldComponent),A=function(e){function a(n,t,a,o){return e.call(this,n,t,a,o)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<ng-container *ngIf="!(instance|ajfExpandFieldWithChoices:searchThreshold); else expanded">\n  <div class="ajf-item-container">\n    <ng-container *ngIf="instance.filteredChoices as cs">\n      <gic-select\n          #multipleChoiceSelect\n          *ngIf="control|async as ctrl"\n          [multiple]="true"\n          [searchBar]="instance|ajfSelectHasSearchBar:searchThreshold"\n          [useVirtualScroll]="instance|ajfSelectUseVirtualScroll:100"\n          [placeholder]="instance.node.label"\n          [formControl]="ctrl!"\n          [disabled]="readonly">\n        <gic-select-option *ngFor="let item of cs"\n            [value]="item.value">{{ item.label|translate }}</gic-select-option>\n      </gic-select>\n    </ng-container>\n  </div>\n</ng-container>\n<ng-template #expanded>\n  <div ajf-checkbox-group\n      *ngIf="control|async as ctrl"\n      [formControl]="ctrl!"\n      class="ajf-choices-container"\n  >\n    <ion-card  *ngFor="let choice of instance.filteredChoices">\n      <ajf-checkbox-group-item\n        [readonly]="readonly"\n        [value]="choice.value">\n        {{ choice.label | translate }}\n      </ajf-checkbox-group-item>\n    </ion-card>\n  </div>\n</ng-template>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y},{type:Number,decorators:[{type:t.Optional},{type:t.Inject,args:[n.AJF_SEARCH_ALERT_THRESHOLD]}]}]},a}(n.AjfFieldWithChoicesComponent),_=function(e){function a(n,a,i){var c=e.call(this,n,a,i)||this;return c._setValueEvt=new t.EventEmitter,c._setValueSub=o.Subscription.EMPTY,c.type="number",c.value=o.defer((function(){return c.control.pipe(r.filter((function(e){return null!=e})),r.switchMap((function(e){return e.valueChanges.pipe(r.startWith(e.value))})))})),c}return h(a,e),a.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this._setValueEvt.complete(),this._setValueSub.unsubscribe()},a.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this._setValueSub=this._setValueEvt.pipe(r.withLatestFrom(this.control)).subscribe((function(e){var n=function t(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,o,r=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i}(e,2),a=n[1];null!=a&&a.setValue(n[0])}))},a.prototype.setValue=function(e){try{e=parseFloat(""+e),isNaN(e)&&(e=null)}catch(n){e=null}this._setValueEvt.emit(e)},a.decorators=[{type:t.Component,args:[{template:'<ion-input [ngModel]="value|async" (ngModelChange)="setValue($event)" [readonly]="readonly"></ion-input>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfInputFieldComponent),D=function(e){function a(n,t,a,o){return e.call(this,n,t,a,o)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<ng-container *ngIf="!(instance|ajfExpandFieldWithChoices:searchThreshold); else expanded">\n  <div class="ajf-item-container">\n    <ng-container *ngIf="instance.filteredChoices as cs">\n      <gic-select *ngIf="control|async as ctrl"\n          #singleChoiceSelect\n          [disabled]="readonly"\n          [searchBar]="instance|ajfSelectHasSearchBar:searchThreshold"\n          [useVirtualScroll]="instance|ajfSelectUseVirtualScroll:100"\n          [placeholder]="instance.node.label"\n          [formControl]="ctrl!">\n        <gic-select-option *ngFor="let item of cs" [value]="item.value">{{ item.label|translate }}</gic-select-option>\n      </gic-select>\n    </ng-container>\n  </div>\n</ng-container>\n<ng-template #expanded>\n  <div class="ajf-choices-container">\n    <ion-radio-group\n      *ngIf="control|async as ctrl"\n      [formControl]="ctrl!">\n      <ion-item *ngFor="let choice of instance.filteredChoices">\n        <ion-label>{{ choice.label | translate }}</ion-label>\n        <ion-radio [disabled]="readonly" [value]="choice.value"></ion-radio>\n      </ion-item>\n    </ion-radio-group>\n  </div>\n</ng-template>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y},{type:Number,decorators:[{type:t.Optional},{type:t.Inject,args:[n.AJF_SEARCH_ALERT_THRESHOLD]}]}]},a}(n.AjfFieldWithChoicesComponent),w=function(e){function a(n,t,a){return e.call(this,n,t,a)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<div class="ajf-table-container">\n  <table>\n    <ng-container *ngFor="let columns of (instance|ajfTableVisibleColumns); let i = index">\n      <tr [ngClass]="i | ajfTableRowClass">\n        <td *ngFor="let cellValue of columns" >\n          {{ cellValue | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}\n        </td>\n      </tr>\n    </ng-container>\n  </table>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["table.ajf-table-field{width:100%}\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfBaseFieldComponent),P=function(e){function a(n,t,a){return e.call(this,n,t,a)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<ion-textarea *ngIf="control|async as ctrl" [formControl]="ctrl!"></ion-textarea>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfBaseFieldComponent),M=function(e){function a(n,t,a){return e.call(this,n,t,a)||this}return h(a,e),a.decorators=[{type:t.Component,args:[{template:'<ajf-time *ngIf="control|async as ctrl" [formControl]="ctrl!" [readonly]="readonly"></ajf-time>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["\n"]}]}],a.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},a}(n.AjfBaseFieldComponent),R=function(e){function a(){var t=e.call(this)||this;return t.componentsMap[n.AjfFieldType.String]={component:F},t.componentsMap[n.AjfFieldType.Text]={component:P},t.componentsMap[n.AjfFieldType.Number]={component:_},t.componentsMap[n.AjfFieldType.Boolean]={component:v},t.componentsMap[n.AjfFieldType.Formula]={component:x},t.componentsMap[n.AjfFieldType.Date]={component:b},t.componentsMap[n.AjfFieldType.DateInput]={component:C},t.componentsMap[n.AjfFieldType.Table]={component:w},t.componentsMap[n.AjfFieldType.Empty]={component:I},t.componentsMap[n.AjfFieldType.SingleChoice]={component:D},t.componentsMap[n.AjfFieldType.MultipleChoice]={component:A},t.componentsMap[n.AjfFieldType.Time]={component:M},t.componentsMap[n.AjfFieldType.Barcode]={component:S},t}return h(a,e),a.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[]},a.ɵprov=t["ɵɵdefineInjectable"]({factory:function e(){return new a},token:a,providedIn:"root"}),a}(n.AjfFieldService),E=function(e){function n(n,t,a){var o=e.call(this,n,t)||this;return o.componentsMap=a.componentsMap,o}return h(n,e),n.decorators=[{type:t.Component,args:[{selector:"ajf-field,ajf-form-field",template:'<div\n    [ngClass]="\'ajf-field-\' + (instance|ajfNodeCompleteName)"\n    [class.ajf-validated]="instance.validationResults|ajfFieldIsValid"\n>\n  <ng-template ajf-field-host></ng-template>\n</div>\n<ng-container *ngIf="instance.node.attachments">\n  <ng-container *ngFor="let attachment of instance.node.attachments">\n    <a [href]="attachment.value" target="_blank">{{attachment.label}}</a>\n  </ng-container>\n</ng-container>\n<ng-container *ngIf="instance.validationResults">\n  <div class="ajf-errors">\n    <ng-container *ngFor="let res of instance.validationResults">\n      <div class="error" *ngIf="!res.result">\n        {{ res.error | translate }}\n      </div>\n    </ng-container>\n  </div>\n</ng-container>\n',encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush,styles:["ajf-field ion-select{position:relative}ajf-field ion-input,ajf-field ion-textarea{border:dashed 2px #eee}ajf-field .ajf-choices-container{flex-direction:row;align-items:stretch;flex-wrap:wrap;display:flex}ajf-field .ajf-choices-container>ion-radio-group{display:flex;flex-wrap:wrap}ajf-field .ajf-choices-container>ion-radio-group ion-item{--ion-item-border-color: transparent}ajf-field .ajf-choices-container>ion-radio-group ion-item ion-label{margin-right:10px}ajf-field .ajf-choices-container>ion-card{margin-top:0;width:33%;display:flex;font-size:13px;flex-wrap:wrap;flex-basis:21% !important;flex-shrink:3 !important}ajf-field .ajf-choices-container>ion-card>ajf-checkbox-group-item{width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:center}ajf-field .ajf-choices-container>ion-card>ion-item{font-size:13px;flex:1 0 auto;flex-shrink:3 !important;flex-basis:21% !important;margin:0 10px}ajf-field .ajf-item-container{position:relative}ajf-field .ajf-errors{font-style:italic;padding:5px}ajf-field tr.ajf-row-odd{background-color:gray}ajf-field .ajf-table-container{overflow-x:auto}ajf-field .ajf-table-container table{width:100%}\n"]}]}],n.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:t.ComponentFactoryResolver},{type:R}]},n}(n.AjfFormField),T=function(e){function a(n,a){var i=e.call(this,n,a)||this;return i._longSlide=!1,i._viewInitEvt=new t.EventEmitter,i._scrollFinishSub=o.Subscription.EMPTY,i._scrollFinishSub=i._viewInitEvt.pipe(r.delayWhen((function(){return i.formGroup})),r.switchMap((function(){return i.formSlider.pageScrollFinish}))).subscribe((function(e){return i._updateLongSlide()})),i}return h(a,e),Object.defineProperty(a.prototype,"longSlide",{get:function(){return this._longSlide},enumerable:!0,configurable:!0}),a.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),this._viewInitEvt.emit()},a.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this._scrollFinishSub.unsubscribe()},a.prototype._updateLongSlide=function(){var e=this.formSlider.isCurrentPageLong();e!==this._longSlide&&(this._longSlide=e,this._changeDetectorRef.markForCheck())},a.decorators=[{type:t.Component,args:[{selector:"ajf-form",template:'<ng-container *ngIf="formGroup|async as currentFormGroup">\n  <form novalidate [formGroup]="currentFormGroup!">\n    <div class="ajf-form-container">\n      <ion-toolbar *ngIf="!hideTopToolbar">\n        {{ title | translate }}\n        <ion-buttons slot="end">\n          <ion-button *ngIf="!saveDisabled" (click)="onSave($event)">{{ \'Save\' | translate }}</ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n      <div class="ajf-slider-container">\n        <ajf-page-slider (orientationChange)="orientationChangeHandler($event)"\n            [hideNavigationButtons]="hideNavigationButtons"\n            [fixedOrientation]="fixedOrientation"\n            [orientation]="orientation"\n            #formSlider>\n          <ng-container *ngIf="(slides|async) as curSlides">\n            <ng-container *ngIf="curSlides && curSlides!.length > 0 && hasStartMessage">\n              <ajf-page-slider-item>\n                <div ajfFormPage class="ajf-form-page">\n                  <ion-card>\n                    <ion-card-header>\n                      <div class="ajf-page-slider-item-header">\n                        <h2>\n                          <span class="ajf-form-header-number">\n                            1  &rarr;\n                          </span>\n                          <span class="ajf-title">\n                            <ng-content select="[ajfFormStartMessageTitle]"></ng-content>\n                          </span>\n                        </h2>\n                      </div>\n                    </ion-card-header>\n                    <ion-card-content>\n                      <ng-content select="[ajfFormStartMessage]"></ng-content>\n                    </ion-card-content>\n                  </ion-card>\n                </div>\n              </ajf-page-slider-item>\n            </ng-container>\n            <ng-container *ngFor="let slideInstance of curSlides; trackBy: trackNodeById">\n              <ng-container *ngIf="(!(slideInstance|ajfIsRepeatingSlideInstance)) && slideInstance.visible">\n                <ajf-page-slider-item>\n                  <div ajfFormPage class="ajf-form-page">\n                    <ion-card>\n                      <ion-card-header>\n                        <div class="ajf-page-slider-item-header">\n                          <h2>\n                            <span class="ajf-form-header-number">{{ slideInstance.position + (hasStartMessage | ajfBoolToInt) }} &rarr;</span>\n                            <span class="ajf-title">{{ slideInstance.node.label | translate}}</span>\n                          </h2>\n                          <ion-icon color="danger" name="warning" *ngIf="!slideInstance.valid"></ion-icon>\n                          <ion-icon color="secondary" name="checkmark" *ngIf="slideInstance.valid"></ion-icon>\n                        </div>\n                      </ion-card-header>\n                      <ion-card-content>\n                        <ng-container *ngFor="let fieldInstance of slideInstance.flatNodes; trackBy: trackNodeById">\n                          <div [ngClass]="\'ajf-\' + (fieldInstance|ajfAsFieldInstance).node.size" class="ajf-field-entry"\n                              *ngIf="fieldInstance.visible">\n                            <i [class]="(fieldInstance|ajfAsFieldInstance).node.fieldType | ajfFieldIcon" item-right></i>\n                            <p>{{ (fieldInstance|ajfAsFieldInstance).node.description }}</p>\n                            <ion-label [innerHTML]="fieldInstance.node.label | translate"></ion-label>\n                            <ajf-field [instance]="fieldInstance|ajfAsFieldInstance" [readonly]="readonly"></ajf-field>\n                          </div>\n                        </ng-container>\n                      </ion-card-content>\n                    </ion-card>\n                  </div>\n                </ajf-page-slider-item>\n              </ng-container>\n              <ng-container *ngIf="(slideInstance|ajfIsRepeatingSlideInstance) && slideInstance.visible">\n                <ajf-page-slider-item *ngFor="let curRep of ((slideInstance|ajfAsRepeatingSlideInstance).reps|ajfRange); let idx = index; let lastSlide = last">\n                  <div ajfFormPage class="ajf-form-page">\n                    <ion-card>\n                      <ion-card-header>\n                        <div class="ajf-page-slider-item-header">\n                          <h2>\n                            <span class="ajf-form-header-number">{{ slideInstance.position|ajfIncrement:idx }} &rarr;</span>\n                            <span class="ajf-title">{{ slideInstance.node.label | translate }}</span>\n                          </h2>\n                          <ion-icon color="danger" name="ajf-warning" *ngIf="!(slideInstance|ajfValidSlide:idx)"></ion-icon>\n                          <ion-icon color="secondary" name="checkmark" *ngIf="(slideInstance|ajfValidSlide:idx)"></ion-icon>\n                        </div>\n                        <div *ngIf="lastSlide" class="ajf-group-actions">\n                          <ion-fab-button size="small" (click)="addGroup(slideInstance)" [disabled]="!(slideInstance|ajfAsRepeatingSlideInstance).canAdd">\n                            <ion-icon name="add"></ion-icon>\n                          </ion-fab-button>\n                          <ion-fab-button size="small" (click)="removeGroup(slideInstance)" [disabled]="!(slideInstance|ajfAsRepeatingSlideInstance).canRemove">\n                            <ion-icon name="remove"></ion-icon>\n                          </ion-fab-button>\n                        </div>\n                      </ion-card-header>\n                      <ion-card-content>\n                        <ng-container *ngFor="let fieldInstance of slideInstance.slideNodes[idx]; trackBy: trackNodeById">\n                          <div [ngClass]="\'ajf-\' + (fieldInstance|ajfAsFieldInstance).node.size" class="ajf-field-entry"\n                              *ngIf="fieldInstance.visible">\n                            <i [class]="(fieldInstance|ajfAsFieldInstance).node.fieldType | ajfFieldIcon" item-right></i>\n                            <p>{{ (fieldInstance|ajfAsFieldInstance).node.description }}</p>\n                            <ion-label [innerHTML]="fieldInstance.node.label | translate"></ion-label>\n                            <ajf-field [instance]="fieldInstance|ajfAsFieldInstance" [readonly]="readonly"></ajf-field>\n                          </div>\n                        </ng-container>\n                        <div *ngIf="lastSlide && longSlide" class="ajf-group-actions ajf-group-actions-bottom">\n                          <ion-fab-button size="small" (click)="addGroup(slideInstance)" [disabled]="!(slideInstance|ajfAsRepeatingSlideInstance).canAdd" mat-mini-fab>\n                            <ion-icon name="add"></ion-icon>\n                          </ion-fab-button>\n                          <ion-fab-button size="small" (click)="removeGroup(slideInstance)" [disabled]="!(slideInstance|ajfAsRepeatingSlideInstance).canRemove" mat-mini-fab>\n                            <ion-icon name="remove"></ion-icon>\n                          </ion-fab-button>\n                        </div>\n                      </ion-card-content>\n                    </ion-card>\n                  </div>\n                </ajf-page-slider-item>\n              </ng-container>\n            </ng-container>\n            <ng-container *ngIf="curSlides && curSlides!.length > 0 && hasEndMessage">\n              <ajf-page-slider-item>\n                <div ajfFormPage class="ajf-form-page">\n                  <ion-card>\n                    <ion-card-header>\n                      <div class="ajf-page-slider-item-header">\n                        <h2>\n                          <span *ngIf="(slidesNum|async) as snum" class="ajf-form-header-number">\n                            {{ snum! + (hasStartMessage | ajfBoolToInt) + 1 }} &rarr;\n                          </span>\n                          <span class="ajf-title">\n                            <ng-content select="[ajfFormEndMessageTitle]"></ng-content>\n                          </span>\n                        </h2>\n                      </div>\n                    </ion-card-header>\n                    <ion-card-content>\n                      <ng-content select="[ajfFormEndMessage]"></ng-content>\n                    </ion-card-content>\n                  </ion-card>\n                </div>\n              </ajf-page-slider-item>\n            </ng-container>\n          </ng-container>\n          <div ajfPageSliderBar *ngIf="!hideBottomToolbar">\n            <div class="ajf-left-bar">\n              <ion-buttons class="ajf-errors" *ngIf="((errors | async) || 0) > 0">\n                <ion-button (click)="goToPrevError()" color="danger">\n                  <ion-icon name="arrow-up"></ion-icon>\n                </ion-button>\n                <ion-button (click)="goToNextError()" color="danger">\n                  <ion-icon name="arrow-down"></ion-icon>\n                </ion-button>\n              </ion-buttons>\n              <div class="ajf-info-box ajf-error">\n                <div class="ajf-title" translate>\n                  Errors\n                </div>\n                <div class="ajf-content">\n                  {{ errors | async }} / {{ slidesNum|async }}\n                </div>\n              </div>\n            </div>\n          </div>\n        </ajf-page-slider>\n      </div>\n    </div>\n  </form>\n</ng-container>\n',encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush,styles:["ajf-form{display:block;position:relative}ajf-form form{display:block;position:absolute;top:0;right:0;bottom:0;left:0}ajf-form form .ajf-form-container{display:flex;flex-direction:column;height:100%}ajf-form form .ajf-form-container ion-toolbar{flex:0 0 auto;height:56px}ajf-form form .ajf-form-container ion-toolbar.ajf-hidden{opacity:0}ajf-form form .ajf-form-container>.ajf-slider-container{flex:1 1 auto;position:relative;height:calc(100% - 56px)}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider{height:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content{padding:16px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page{flex:1;max-height:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card{flex:1;margin-bottom:2em}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header{overflow:visible !important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header .ajf-group-actions{position:absolute;left:calc(100vw - 160px - 6em);width:160px;margin-top:-2em;padding:15px;z-index:10;white-space:nowrap;overflow:visible !important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header .ajf-group-actions ion-fab-button{display:inline-block;overflow:visible !important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content{display:flex;flex-wrap:wrap;flex-direction:row;align-content:flex-start;position:relative}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content .ajf-group-actions-bottom{width:100%;text-align:right;overflow:visible !important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content .ajf-group-actions-bottom ion-fab-button{overflow:visible !important;display:inline-block}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry{flex:1 0 auto;padding-left:10px;padding-right:10px;width:100%;box-sizing:border-box}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-normal{width:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-small{width:50%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-smaller{width:33%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-tiny{width:25%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-mini{width:20%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header{display:flex;align-items:center;width:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2{flex:1}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2>.ajf-form-header-number{margin-right:.5em}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2>.ajf-title{display:inline-block;margin-right:40px;white-space:normal;vertical-align:top}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar{display:flex;align-items:flex-start;flex-direction:row;position:absolute;bottom:0}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar ion-buttons.ajf-errors{order:1;color:red}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box{height:40px;padding:4px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box>div{height:16px;line-height:16px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box>div.ajf-content{font-weight:bold}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box.ajf-error{order:2;color:red}ajf-form form .ajf-form-container .ajf-spacer{flex:1 0 auto}\n"]}]}],a.ctorParameters=function(){return[{type:n.AjfFormRendererService},{type:t.ChangeDetectorRef}]},a}(n.AjfFormRenderer),V=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"[ajfFormPage]"}]}],e}(),k=function(){function e(){}return e.prototype.transform=function(e,n){return e.filteredChoices&&e.filteredChoices.length>n},e.decorators=[{type:t.Pipe,args:[{name:"ajfSelectHasSearchBar"}]}],e}(),B=function(){function e(){}return e.prototype.transform=function(e,n){return e.filteredChoices&&e.filteredChoices.length>n},e.decorators=[{type:t.Pipe,args:[{name:"ajfSelectUseVirtualScroll"}]}],e}(),N=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[R]}},e.decorators=[{type:t.NgModule,args:[{imports:[c.AjfBarcodeModule,l.AjfCalendarModule,s.AjfCheckboxGroupModule,i.AjfCommonModule,n.AjfFormsModule,f.AjfPageSliderModule,d.AjfTimeModule,p.CommonModule,m.FormsModule,g.GicModule,m.ReactiveFormsModule,a.IonicModule,u.TranslateModule],declarations:[S,v,b,C,I,E,V,T,x,F,A,_,k,B,D,w,P,M],entryComponents:[S,v,b,C,I,x,F,A,_,D,w,P,M],exports:[E,T],providers:[R,y]}]}],e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
e.AjfBooleanFieldComponent=v,e.AjfDateFieldComponent=b,e.AjfDateInputFieldComponent=C,e.AjfEmptyFieldComponent=I,e.AjfFieldService=R,e.AjfFormField=E,e.AjfFormRenderer=T,e.AjfFormsModule=N,e.AjfInputFieldComponent=F,e.AjfMultipleChoiceFieldComponent=A,e.AjfNumberFieldComponent=_,e.AjfSingleChoiceFieldComponent=D,e.AjfTableFieldComponent=w,e.AjfTextareaFieldComponent=P,e.AjfTimeFieldComponent=M,e.AjfWarningAlertService=y,e.ɵgc_ajf_src_ionic_forms_forms_a=S,e.ɵgc_ajf_src_ionic_forms_forms_b=V,e.ɵgc_ajf_src_ionic_forms_forms_c=x,e.ɵgc_ajf_src_ionic_forms_forms_d=k,e.ɵgc_ajf_src_ionic_forms_forms_e=B,Object.defineProperty(e,"__esModule",{value:!0})}));