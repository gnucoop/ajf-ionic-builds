/**
 * @license
 * Copyright (C) 2018 Gnucoop soc. coop.
 *
 * This file is part of the Advanced JSON forms (ajf).
 *
 * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
 * modify it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the License,
 * or (at your option) any later version.
 *
 * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
 * General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with Advanced JSON forms (ajf).
 * If not, see http://www.gnu.org/licenses/.
 *
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@ajf/core/forms"),require("@angular/core"),require("@ionic/angular"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/forms"),require("@gic/angular"),require("@ngx-translate/core"),require("@ajf/core/common"),require("@ajf/core/time"),require("@ajf/ionic/barcode"),require("@ajf/ionic/calendar"),require("@ajf/ionic/checkbox-group"),require("@ajf/ionic/page-slider")):"function"==typeof define&&define.amd?define("@ajf/ionic/forms",["exports","@ajf/core/forms","@angular/core","@ionic/angular","rxjs","rxjs/operators","@angular/common","@angular/forms","@gic/angular","@ngx-translate/core","@ajf/core/common","@ajf/core/time","@ajf/ionic/barcode","@ajf/ionic/calendar","@ajf/ionic/checkbox-group","@ajf/ionic/page-slider"],n):n(((e=e||self).ajf=e.ajf||{},e.ajf.ionic=e.ajf.ionic||{},e.ajf.ionic.forms={}),e.ajf.core.forms,e.ng.core,e.ionic.angular,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.forms,e.gic.angular,e.ngxt.core,e.ajf.core.common,e.ajf.core.time,e.ajf.ionic.barcode,e.ajf.ionic.calendar,e.ajf.ionic.checkboxGroup,e.ajf.ionic.pageSlider)}(this,function(e,n,i,a,r,c,t,o,l,s,f,d,p,m,g,j){"use strict";var u=function(e,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])})(e,n)};function h(e,n){function a(){this.constructor=e}u(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}var y=(v.prototype.showWarningAlertPrompt=function(n){var a=this;return new r.Observable(function(e){a._alertCtrl.create({header:"Warning",message:n.join("\n"),buttons:[{text:"No",handler:function(){e.next({result:!1}),e.complete()}},{text:"Yes",handler:function(){e.next({result:!0}),e.complete()}}]}).then(function(e){e.present()})})},v.decorators=[{type:i.Injectable}],v.ctorParameters=function(){return[{type:a.AlertController}]},v);function v(e){this._alertCtrl=e}var b,C=(h(S,b=n.AjfBaseFieldComponent),S.decorators=[{type:i.Component,args:[{template:'<ion-toggle [formControl]="control|async"></ion-toggle>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],S.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},S);function S(e,n,a){return b.call(this,e,n,a)||this}var x,I=(h(F,x=n.AjfBaseFieldComponent),F.decorators=[{type:i.Component,args:[{template:'<ion-item><ajf-calendar selectionMode="day" dateOnlyForDay [minDate]="instance.node.minDate|ajfDateValue" [maxDate]="instance.node.maxDate|ajfDateValue" [disabled]="readonly" [formControl]="control|async"></ajf-calendar></ion-item>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],F.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},F);function F(e,n,a){return x.call(this,e,n,a)||this}var w,A=(h(D,w=n.AjfBaseFieldComponent),D.prototype.onChange=function(e){if(null!=this.input){var n=e.detail.value||"";0<n.length&&(null!=this._minDateStr&&n<this._minDateStr||null!=this._maxDateStr&&n>this._maxDateStr)&&(this.input.value="")}},D.prototype._onInstanceChange=function(){this._minDateStr=this._dvs.transform(this.instance.node.minDate),this._maxDateStr=this._dvs.transform(this.instance.node.maxDate)},D.decorators=[{type:i.Component,args:[{template:'<ion-input type="date" [min]="instance.node.minDate|ajfDateValueString" [max]="instance.node.maxDate|ajfDateValueString" [readonly]="readonly" (ionChange)="onChange($event)" [formControl]="control|async"></ion-input>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],D.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y},{type:n.AjfDateValueStringPipe}]},D.propDecorators={input:[{type:i.ViewChild,args:[a.IonInput,{static:!0}]}]},D);function D(e,n,a,t){var o=w.call(this,e,n,a)||this;return o._dvs=t,o}var M,P=(h(_,M=n.AjfBaseFieldComponent),_.decorators=[{type:i.Component,args:[{template:'<div [innerHTML]="instance.node.HTML"></div>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],_.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},_);function _(e,n,a){return M.call(this,e,n,a)||this}var T,E=(h(R,T=n.AjfBaseFieldComponent),R.decorators=[{type:i.Component,args:[{template:'<ajf-barcode [formControl]="control|async" [readonly]="readonly"></ajf-barcode>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],R.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},R);function R(e,n,a){return T.call(this,e,n,a)||this}var V,B=(h(k,V=n.AjfBaseFieldComponent),k.prototype.ngOnDestroy=function(){this._onChangeEvt.complete(),this._onChangeSub.unsubscribe()},k.prototype.onChange=function(e){this._onChangeEvt.emit(e.detail.value)},k.decorators=[{type:i.Component,args:[{template:'<ion-input type="text" readonly="readonly" [value]="value|async" (ionChange)="onChange($event)"></ion-input>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],k.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},k.propDecorators={input:[{type:i.ViewChild,args:[a.IonInput,{static:!0}]}]},k);function k(e,n,a){var t=V.call(this,e,n,a)||this;t._onChangeEvt=new i.EventEmitter,t._onChangeSub=r.Subscription.EMPTY;var o=t.control.pipe(c.filter(function(e){return null!=e}));return t._onChangeSub=o.pipe(c.switchMap(function(n){return t._onChangeEvt.pipe(c.map(function(e){return{control:n,value:e}}))})).subscribe(function(e){var n=e.control,a=e.value;try{a=parseFloat(a)}catch(e){}n.setValue(a)}),t.value=t.control.pipe(c.filter(function(e){return null!=e}),c.switchMap(function(e){return e.valueChanges.pipe(c.startWith(e.value))})),t}var N,O=(h(q,N=n.AjfInputFieldComponent),q.decorators=[{type:i.Component,args:[{template:'<ion-input [type]="type" [formControl]="control|async" [attr.disabled]="readonly"></ion-input>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],q.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},q);function q(e,n,a){return N.call(this,e,n,a)||this}var H,G=(h(L,H=n.AjfFieldWithChoicesComponent),L.decorators=[{type:i.Component,args:[{template:'<ng-container *ngIf="!(instance|ajfExpandFieldWithChoices:searchThreshold); else expanded"><div class="ajf-item-container"><gic-select *ngIf="instance.filteredChoices as cs" #multipleChoiceSelect multiple="multiple" [searchBar]="instance|ajfSelectHasSearchBar:searchThreshold" [useVirtualScroll]="instance|ajfSelectUseVirtualScroll:100" [placeholder]="instance.node.label" [formControl]="control|async" [disabled]="readonly"><gic-select-option *ngFor="let item of cs" [value]="item.value">{{ item.label|translate }}</gic-select-option></gic-select></div></ng-container><ng-template #expanded><div ajf-checkbox-group [formControl]="control|async" class="ajf-choices-container"><ion-card *ngFor="let choice of instance.filteredChoices"><ajf-checkbox-group-item [value]="choice.value">{{ choice.label | translate }}</ajf-checkbox-group-item></ion-card></div></ng-template>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],L.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y},{type:Number,decorators:[{type:i.Optional},{type:i.Inject,args:[n.AJF_SEARCH_ALERT_THRESHOLD]}]}]},L);function L(e,n,a,t){return H.call(this,e,n,a,t)||this}var z,W=(h($,z=n.AjfInputFieldComponent),$.prototype.ngOnDestroy=function(){z.prototype.ngOnDestroy.call(this),this._setValueEvt.complete(),this._setValueSub.unsubscribe()},$.prototype.ngOnInit=function(){z.prototype.ngOnInit.call(this),this._setValueSub=this._setValueEvt.pipe(c.withLatestFrom(this.control)).subscribe(function(e){var n=e[0],a=e[1];null!=a&&a.setValue(n)})},$.prototype.setValue=function(n){try{n=parseFloat(""+n),isNaN(n)&&(n=null)}catch(e){n=null}this._setValueEvt.emit(n)},$.decorators=[{type:i.Component,args:[{template:'<ion-input [ngModel]="value|async" (ngModelChange)="setValue($event)" [readonly]="readonly"></ion-input>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],$.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},$);function $(e,n,a){var t=z.call(this,e,n,a)||this;return t._setValueEvt=new i.EventEmitter,t._setValueSub=r.Subscription.EMPTY,t.type="number",t.value=r.defer(function(){return t.control.pipe(c.filter(function(e){return null!=e}),c.switchMap(function(e){return e.valueChanges.pipe(c.startWith(e.value))}))}),t}var Y,U=(h(J,Y=n.AjfFieldWithChoicesComponent),J.decorators=[{type:i.Component,args:[{template:'<ng-container *ngIf="!(instance|ajfExpandFieldWithChoices:searchThreshold); else expanded"><div class="ajf-item-container"><gic-select *ngIf="instance.filteredChoices as cs" #singleChoiceSelect [searchBar]="instance|ajfSelectHasSearchBar:searchThreshold" [useVirtualScroll]="instance|ajfSelectUseVirtualScroll:100" [placeholder]="instance.node.label" [formControl]="control|async"><ion-content><ion-virtual-scroll [items]="cs"><gic-select-option *virtualItem="let item" [value]="item.value">{{ item.label|translate }}</gic-select-option></ion-virtual-scroll></ion-content></gic-select></div></ng-container><ng-template #expanded><div class="ajf-choices-container"><ion-radio-group [formControl]="control|async"><ion-item *ngFor="let choice of instance.filteredChoices"><ion-label>{{ choice.label | translate}}</ion-label><ion-radio [value]="choice.value"></ion-radio></ion-item></ion-radio-group></div></ng-template>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],J.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y},{type:Number,decorators:[{type:i.Optional},{type:i.Inject,args:[n.AJF_SEARCH_ALERT_THRESHOLD]}]}]},J);function J(e,n,a,t){return Y.call(this,e,n,a,t)||this}var K,Q=(h(X,K=n.AjfBaseFieldComponent),X.decorators=[{type:i.Component,args:[{template:'<div class="ajf-table-container"><table><ng-container *ngFor="let columns of (instance|ajfTableVisibleColumns); let i = index"><tr [ngClass]="i | ajfTableRowClass"><td *ngFor="let cellValue of columns">{{ cellValue | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}</td></tr></ng-container></table></div>',styles:["table.ajf-table-field{width:100%}"],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],X.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},X);function X(e,n,a){return K.call(this,e,n,a)||this}var Z,ee=(h(ne,Z=n.AjfBaseFieldComponent),ne.decorators=[{type:i.Component,args:[{template:'<ion-textarea [formControl]="control|async"></ion-textarea>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],ne.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},ne);function ne(e,n,a){return Z.call(this,e,n,a)||this}var ae,te=(h(oe,ae=n.AjfBaseFieldComponent),oe.decorators=[{type:i.Component,args:[{template:'<ajf-time [formControl]="control|async" [readonly]="readonly">></ajf-time>',styles:[""],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],oe.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:n.AjfFormRendererService},{type:y}]},oe);function oe(e,n,a){return ae.call(this,e,n,a)||this}var ie,re=(h(ce,ie=n.AjfFieldService),ce.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],ce.ctorParameters=function(){return[]},ce.ngInjectableDef=i.ɵɵdefineInjectable({factory:function(){return new ce},token:ce,providedIn:"root"}),ce);function ce(){var e=ie.call(this)||this;return e.componentsMap[n.AjfFieldType.String]={component:O},e.componentsMap[n.AjfFieldType.Text]={component:ee},e.componentsMap[n.AjfFieldType.Number]={component:W},e.componentsMap[n.AjfFieldType.Boolean]={component:C},e.componentsMap[n.AjfFieldType.Formula]={component:B},e.componentsMap[n.AjfFieldType.Date]={component:I},e.componentsMap[n.AjfFieldType.DateInput]={component:A},e.componentsMap[n.AjfFieldType.Table]={component:Q},e.componentsMap[n.AjfFieldType.Empty]={component:P},e.componentsMap[n.AjfFieldType.SingleChoice]={component:U},e.componentsMap[n.AjfFieldType.MultipleChoice]={component:G},e.componentsMap[n.AjfFieldType.Time]={component:te},e.componentsMap[n.AjfFieldType.Barcode]={component:E},e}var le,se=(h(fe,le=n.AjfFormField),fe.decorators=[{type:i.Component,args:[{selector:"ajf-field,ajf-form-field",template:'<div [ngClass]="\'ajf-field-\' + (instance|ajfNodeCompleteName)" [class.ajf-validated]="instance.validationResults|ajfFieldIsValid"><ng-template ajf-field-host></ng-template></div><ng-container *ngIf="instance.node.attachments"><ng-container *ngFor="let attachment of instance.node.attachments"><a [href]="attachment.value" target="_blank">{{attachment.label}}</a></ng-container></ng-container><ng-container *ngIf="instance.validationResults"><div class="ajf-errors"><ng-container *ngFor="let res of instance.validationResults"><div class="error" *ngIf="!res.result">{{ res.error | translate }}</div></ng-container></div></ng-container>',styles:["ajf-field ion-select{position:relative}ajf-field ion-input,ajf-field ion-textarea{border:dashed 2px #eee}ajf-field .ajf-choices-container{flex-direction:row;align-items:stretch;flex-wrap:wrap;display:flex}ajf-field .ajf-choices-container>ion-radio-group{display:flex;flex-wrap:wrap}ajf-field .ajf-choices-container>ion-radio-group ion-item{--ion-item-border-color:transparent}ajf-field .ajf-choices-container>ion-radio-group ion-item ion-label{margin-right:10px}ajf-field .ajf-choices-container>ion-card{margin-top:0;width:33%;display:flex;font-size:13px;flex-wrap:wrap;flex-basis:21%!important;flex-shrink:3!important}ajf-field .ajf-choices-container>ion-card>ajf-checkbox-group-item{width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:center}ajf-field .ajf-choices-container>ion-card>ion-item{font-size:13px;flex:1 0 auto;flex-shrink:3!important;flex-basis:21%!important;margin:0 10px}ajf-field .ajf-item-container{position:relative}ajf-field .ajf-errors{font-style:italic;padding:5px}ajf-field tr.ajf-row-odd{background-color:grey}ajf-field .ajf-table-container{overflow-x:auto}ajf-field .ajf-table-container table{width:100%}"],encapsulation:i.ViewEncapsulation.None,changeDetection:i.ChangeDetectionStrategy.OnPush,inputs:["instance","readonly"],queries:{fieldHost:new i.ViewChild(n.AjfFieldHost,{static:!0})}}]}],fe.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:i.ComponentFactoryResolver},{type:re}]},fe);function fe(e,n,a){var t=le.call(this,e,n)||this;return t.componentsMap=a.componentsMap,t}var de,pe=(h(me,de=n.AjfFormRenderer),Object.defineProperty(me.prototype,"longSlide",{get:function(){return this._longSlide},enumerable:!0,configurable:!0}),me.prototype.ngAfterViewInit=function(){de.prototype.ngAfterViewInit.call(this),this._viewInitEvt.emit()},me.prototype.ngOnDestroy=function(){de.prototype.ngOnDestroy.call(this),this._scrollFinishSub.unsubscribe()},me.prototype._updateLongSlide=function(){var e=this.formSlider.isCurrentPageLong();e!==this._longSlide&&(this._longSlide=e,this._changeDetectorRef.markForCheck())},me.decorators=[{type:i.Component,args:[{selector:"ajf-form",template:'<ng-container *ngIf="formGroup|async as currentFormGroup"><form novalidate [formGroup]="currentFormGroup"><div class="ajf-form-container"><ion-toolbar *ngIf="!hideTopToolbar">{{ title | translate }}<ion-buttons slot="end"><ion-button *ngIf="!saveDisabled" (click)="onSave($event)">{{ \'Save\' | translate }}</ion-button></ion-buttons></ion-toolbar><div class="ajf-slider-container"><ajf-page-slider (orientationChange)="orientationChangeHandler($event)" [hideNavigationButtons]="hideNavigationButtons" [fixedOrientation]="fixedOrientation" [orientation]="orientation" #formSlider><ng-container *ngIf="(slides|async) as curSlides"><ng-container *ngIf="curSlides.length > 0 && hasStartMessage"><ajf-page-slider-item><div ajfFormPage class="ajf-form-page"><ion-card><ion-card-header><div class="ajf-page-slider-item-header"><h2><span class="ajf-form-header-number">1 &rarr; </span><span class="ajf-title"><ng-content select="[ajfFormStartMessageTitle]"></ng-content></span></h2></div></ion-card-header><ion-card-content><ng-content select="[ajfFormStartMessage]"></ng-content></ion-card-content></ion-card></div></ajf-page-slider-item></ng-container><ng-container *ngFor="let slideInstance of curSlides; trackBy: trackNodeById"><ng-container *ngIf="(!(slideInstance|ajfIsRepeatingSlideInstance)) && slideInstance.visible"><ajf-page-slider-item><div ajfFormPage class="ajf-form-page"><ion-card><ion-card-header><div class="ajf-page-slider-item-header"><h2><span class="ajf-form-header-number">{{ slideInstance.position + (hasStartMessage | ajfBoolToInt) }} &rarr;</span> <span class="ajf-title">{{ slideInstance.node.label | translate}}</span></h2><ion-icon color="danger" name="warning" *ngIf="!slideInstance.valid"></ion-icon><ion-icon color="secondary" name="checkmark" *ngIf="slideInstance.valid"></ion-icon></div></ion-card-header><ion-card-content><ng-container *ngFor="let fieldInstance of slideInstance.flatNodes; trackBy: trackNodeById"><div [ngClass]="\'ajf-\' + fieldInstance.node.size" class="ajf-field-entry" *ngIf="fieldInstance.visible"><i [class]="fieldInstance.node.fieldType | ajfFieldIcon" item-right></i><p>{{ fieldInstance.node.description }}</p><ion-label [innerHTML]="fieldInstance.node.label | translate"></ion-label><ajf-field [instance]="fieldInstance" [readonly]="readonly"></ajf-field></div></ng-container></ion-card-content></ion-card></div></ajf-page-slider-item></ng-container><ng-container *ngIf="(slideInstance|ajfIsRepeatingSlideInstance) && slideInstance.visible"><ajf-page-slider-item *ngFor="let curRep of (slideInstance.reps|ajfRange); let idx = index; let lastSlide = last"><div ajfFormPage class="ajf-form-page"><ion-card><ion-card-header><div class="ajf-page-slider-item-header"><h2><span class="ajf-form-header-number">{{ slideInstance.position|ajfIncrement:idx }} &rarr;</span> <span class="ajf-title">{{ slideInstance.node.label | translate }}</span></h2><ion-icon color="danger" name="ajf-warning" *ngIf="!(slideInstance|ajfValidSlide:idx)"></ion-icon><ion-icon color="secondary" name="checkmark" *ngIf="(slideInstance|ajfValidSlide:idx)"></ion-icon></div><div *ngIf="lastSlide" class="ajf-group-actions"><ion-fab-button size="small" (click)="addGroup(slideInstance)" [disabled]="!slideInstance.canAdd"><ion-icon name="add"></ion-icon></ion-fab-button><ion-fab-button size="small" (click)="removeGroup(slideInstance)" [disabled]="!slideInstance.canRemove"><ion-icon name="remove"></ion-icon></ion-fab-button></div></ion-card-header><ion-card-content><ng-container *ngFor="let fieldInstance of slideInstance.slideNodes[idx]; trackBy: trackNodeById"><div [ngClass]="\'ajf-\' + fieldInstance.node.size" class="ajf-field-entry" *ngIf="fieldInstance.visible"><i [class]="fieldInstance.node.fieldType | ajfFieldIcon" item-right></i><p>{{ fieldInstance.node.description }}</p><ion-label [innerHTML]="fieldInstance.node.label | translate"></ion-label><ajf-field [instance]="fieldInstance" [readonly]="readonly"></ajf-field></div></ng-container><div *ngIf="lastSlide && longSlide" class="ajf-group-actions ajf-group-actions-bottom"><ion-fab-button size="small" (click)="addGroup(slideInstance)" [disabled]="!slideInstance.canAdd" mat-mini-fab><ion-icon name="add"></ion-icon></ion-fab-button><ion-fab-button size="small" (click)="removeGroup(slideInstance)" [disabled]="!slideInstance.canRemove" mat-mini-fab><ion-icon name="remove"></ion-icon></ion-fab-button></div></ion-card-content></ion-card></div></ajf-page-slider-item></ng-container></ng-container><ng-container *ngIf="curSlides.length > 0 && hasEndMessage"><ajf-page-slider-item><div ajfFormPage class="ajf-form-page"><ion-card><ion-card-header><div class="ajf-page-slider-item-header"><h2><span *ngIf="(slidesNum|async) as snum" class="ajf-form-header-number">{{ snum + (hasStartMessage | ajfBoolToInt) + 1 }} &rarr; </span><span class="ajf-title"><ng-content select="[ajfFormEndMessageTitle]"></ng-content></span></h2></div></ion-card-header><ion-card-content><ng-content select="[ajfFormEndMessage]"></ng-content></ion-card-content></ion-card></div></ajf-page-slider-item></ng-container></ng-container><div ajfPageSliderBar *ngIf="!hideBottomToolbar"><div class="ajf-left-bar"><ion-buttons class="ajf-errors" *ngIf="((errors | async) || 0) > 0"><ion-button (click)="goToPrevError()" color="danger"><ion-icon name="arrow-up"></ion-icon></ion-button><ion-button (click)="goToNextError()" color="danger"><ion-icon name="arrow-down"></ion-icon></ion-button></ion-buttons><div class="ajf-info-box ajf-error"><div class="ajf-title" translate>Errors</div><div class="ajf-content">{{ errors | async }} / {{ slidesNum|async }}</div></div></div></div></ajf-page-slider></div></div></form></ng-container>',styles:["ajf-form{display:block;position:relative}ajf-form form{display:block;position:absolute;top:0;right:0;bottom:0;left:0}ajf-form form .ajf-form-container{display:flex;flex-direction:column;height:100%}ajf-form form .ajf-form-container ion-toolbar{flex:0 0 auto;height:56px}ajf-form form .ajf-form-container ion-toolbar.ajf-hidden{opacity:0}ajf-form form .ajf-form-container>.ajf-slider-container{flex:1 1 auto;position:relative;height:calc(100% - 56px)}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider{height:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content{padding:16px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page{flex:1;max-height:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card{flex:1;margin-bottom:2em}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header{overflow:visible!important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header .ajf-group-actions{position:absolute;left:calc(100vw - 160px - 6em);width:160px;margin-top:-2em;padding:15px;z-index:10;white-space:nowrap;overflow:visible!important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header .ajf-group-actions ion-fab-button{display:inline-block;overflow:visible!important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content{display:flex;flex-wrap:wrap;flex-direction:row;align-content:flex-start;position:relative}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content .ajf-group-actions-bottom{width:100%;text-align:right;overflow:visible!important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content .ajf-group-actions-bottom ion-fab-button{overflow:visible!important;display:inline-block}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry{flex:1 0 auto;padding-left:10px;padding-right:10px;width:100%;box-sizing:border-box}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-normal{width:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-small{width:50%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-smaller{width:33%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-tiny{width:25%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-mini{width:20%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header{display:flex;align-items:center;width:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2{flex:1}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2>.ajf-form-header-number{margin-right:.5em}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2>.ajf-title{display:inline-block;margin-right:40px;white-space:normal;vertical-align:top}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar{display:flex;align-items:flex-start;flex-direction:row;position:absolute;bottom:0}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar ion-buttons.ajf-errors{order:1;color:red}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box{height:40px;padding:4px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box>div{height:16px;line-height:16px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box>div.ajf-content{font-weight:700}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box.ajf-error{order:2;color:red}ajf-form form .ajf-form-container .ajf-spacer{flex:1 0 auto}"],encapsulation:i.ViewEncapsulation.None,changeDetection:i.ChangeDetectionStrategy.OnPush,inputs:["hasStartMessage","hasEndMessage","readonly","form","formSchema","saveDisabled","title","showTopToolbar","showBottomToolbar","showNavigationButtons","orientation","fixedOrientation"],outputs:["formSave","formAction","orientationChange"],queries:{formSlider:new i.ViewChild("formSlider",{static:!1}),fields:new i.ViewChildren(se)}}]}],me.ctorParameters=function(){return[{type:n.AjfFormRendererService},{type:i.ChangeDetectorRef}]},me);function me(e,n){var a=de.call(this,e,n)||this;return a._longSlide=!1,a._viewInitEvt=new i.EventEmitter,a._scrollFinishSub=r.Subscription.EMPTY,a._scrollFinishSub=a._viewInitEvt.pipe(c.delayWhen(function(){return a.formGroup}),c.switchMap(function(){return a.formSlider.pageScrollFinish})).subscribe(function(e){return a._updateLongSlide()}),a}var ge=(je.decorators=[{type:i.Directive,args:[{selector:"[ajfFormPage]"}]}],je);function je(){}var ue=(he.prototype.transform=function(e,n){return e.filteredChoices&&e.filteredChoices.length>n},he.decorators=[{type:i.Pipe,args:[{name:"ajfSelectHasSearchBar"}]}],he);function he(){}var ye=(ve.prototype.transform=function(e,n){return e.filteredChoices&&e.filteredChoices.length>n},ve.decorators=[{type:i.Pipe,args:[{name:"ajfSelectUseVirtualScroll"}]}],ve);function ve(){}var be=(Ce.forRoot=function(){return{ngModule:Ce,providers:[re]}},Ce.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,o.FormsModule,o.ReactiveFormsModule,a.IonicModule,l.GicModule,s.TranslateModule,f.AjfCommonModule,n.AjfFormsModule,m.AjfCalendarModule,p.AjfBarcodeModule,g.AjfCheckboxGroupModule,j.AjfPageSliderModule,d.AjfTimeModule],declarations:[E,C,I,A,P,se,ge,pe,B,O,G,W,ue,ye,U,Q,ee,te],exports:[se,pe],entryComponents:[E,C,I,A,P,B,O,G,W,U,Q,ee,te],providers:[re,y]}]}],Ce);function Ce(){}e.AjfBooleanFieldComponent=C,e.AjfDateFieldComponent=I,e.AjfDateInputFieldComponent=A,e.AjfEmptyFieldComponent=P,e.AjfFieldService=re,e.AjfFormField=se,e.AjfFormRenderer=pe,e.AjfFormsModule=be,e.AjfInputFieldComponent=O,e.AjfMultipleChoiceFieldComponent=G,e.AjfNumberFieldComponent=W,e.AjfSingleChoiceFieldComponent=U,e.AjfTableFieldComponent=Q,e.AjfTextareaFieldComponent=ee,e.AjfTimeFieldComponent=te,e.AjfWarningAlertService=y,e.ɵa=E,e.ɵb=ge,e.ɵc=B,e.ɵd=ue,e.ɵe=ye,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ionic-forms.umd.min.js.map
