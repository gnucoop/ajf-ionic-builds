!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("tslib"),require("@ajf/core/forms"),require("@angular/core"),require("@ionic/angular"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/forms"),require("@gic/angular"),require("@ngx-translate/core"),require("@ajf/core/common"),require("@ajf/ionic/barcode"),require("@ajf/ionic/calendar"),require("@ajf/ionic/checkbox-group"),require("@ajf/ionic/page-slider"),require("@ajf/ionic/time")):"function"==typeof define&&define.amd?define("@ajf/ionic/forms",["exports","tslib","@ajf/core/forms","@angular/core","@ionic/angular","rxjs","rxjs/operators","@angular/common","@angular/forms","@gic/angular","@ngx-translate/core","@ajf/core/common","@ajf/ionic/barcode","@ajf/ionic/calendar","@ajf/ionic/checkbox-group","@ajf/ionic/page-slider","@ajf/ionic/time"],n):n(((e=e||self).ajf=e.ajf||{},e.ajf.ionic=e.ajf.ionic||{},e.ajf.ionic.forms={}),e.tslib,e.ng.core.forms,e.ng.core,e.ionic.angular,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.forms,e.gic.angular,e.ngxTranslate.core,e.ng.core.common,e.ng.ionic.barcode,e.ng.ionic.calendar,e.ng.ionic.checkboxGroup,e.ng.ionic.pageSlider,e.ng.ionic.time)}(this,(function(e,n,t,a,o,i,r,c,l,s,f,d,p,m,g,u,j){"use strict";
/**
     * @license
     * Copyright (C) 2018 Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var h=function(){function e(e){this._alertCtrl=e}return e.prototype.showWarningAlertPrompt=function(e){var n=this;return new i.Observable((function(t){n._alertCtrl.create({header:"Warning",message:e.join("\n"),buttons:[{text:"No",handler:function(){t.next({result:!1}),t.complete()}},{text:"Yes",handler:function(){t.next({result:!0}),t.complete()}}]}).then((function(e){e.present()}))}))},e.decorators=[{type:a.Injectable}],e.ctorParameters=function(){return[{type:o.AlertController}]},e}(),y=function(e){function o(n,t,a){return e.call(this,n,t,a)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<ion-toggle *ngIf="control|async as ctrl" [disabled]="readonly" [formControl]="ctrl!"></ion-toggle>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfBaseFieldComponent),b=function(e){function o(n,t,a){return e.call(this,n,t,a)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<ion-item>\n  <ajf-calendar\n      *ngIf="control|async as ctrl"\n      selectionMode="day"\n      [dateOnlyForDay]="true"\n      [minDate]="instance.node.minDate|ajfDateValue"\n      [maxDate]="instance.node.maxDate|ajfDateValue"\n      [disabled]="readonly"\n      [formControl]="ctrl!"></ajf-calendar>\n</ion-item>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfBaseFieldComponent),v=function(e){function i(n,t,a,o){var i=e.call(this,n,t,a)||this;return i._dvs=o,i}return n.__extends(i,e),i.prototype.onChange=function(e){if(null!=this.input&&null!=e.detail){var n=e.detail.value||"";n.length>0&&(null!=this._minDateStr&&n<this._minDateStr||null!=this._maxDateStr&&n>this._maxDateStr)&&(this.input.value="")}},i.prototype._onInstanceChange=function(){this._minDateStr=this._dvs.transform(this.instance.node.minDate),this._maxDateStr=this._dvs.transform(this.instance.node.maxDate)},i.decorators=[{type:a.Component,args:[{template:'<ion-input\n    type="date"\n    *ngIf="control|async as ctrl"\n    [min]="instance.node.minDate|ajfDateValueString"\n    [max]="instance.node.maxDate|ajfDateValueString"\n    [readonly]="readonly"\n    (ionChange)="onChange($event)"\n    [formControl]="ctrl!"></ion-input>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],i.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h},{type:t.AjfDateValueStringPipe}]},i.propDecorators={input:[{type:a.ViewChild,args:[o.IonInput,{static:!1}]}]},i}(t.AjfBaseFieldComponent),C=function(e){function o(n,t,a){return e.call(this,n,t,a)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<div [innerHTML]="instance.node.HTML"></div>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfBaseFieldComponent),x=function(e){function o(n,t,a){return e.call(this,n,t,a)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<ajf-barcode *ngIf="control|async as ctrl" [formControl]="ctrl!" [readonly]="readonly"></ajf-barcode>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfBaseFieldComponent),I=function(e){function c(n,t,o){var c=e.call(this,n,t,o)||this;c._onChangeEvt=new a.EventEmitter,c._onChangeSub=i.Subscription.EMPTY;var l=c.control.pipe(r.filter((function(e){return null!=e})));return c._onChangeSub=l.pipe(r.switchMap((function(e){return c._onChangeEvt.pipe(r.map((function(n){return{control:e,value:n}})))}))).subscribe((function(e){var n=e.control,t=e.value;try{t=parseFloat(t)}catch(e){}n.setValue(t)})),c.value=c.control.pipe(r.filter((function(e){return null!=e})),r.switchMap((function(e){return e.valueChanges.pipe(r.startWith(e.value))}))),c}return n.__extends(c,e),c.prototype.ngOnDestroy=function(){this._onChangeEvt.complete(),this._onChangeSub.unsubscribe()},c.prototype.onChange=function(e){null!=e.detail&&this._onChangeEvt.emit(e.detail.value)},c.decorators=[{type:a.Component,args:[{template:'<ion-input type="text" [readonly]="true" [value]="value|async" (ionChange)="onChange($event)"></ion-input>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],c.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},c.propDecorators={input:[{type:a.ViewChild,args:[o.IonInput,{static:!0}]}]},c}(t.AjfBaseFieldComponent),S=function(e){function o(n,t,a){return e.call(this,n,t,a)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<ion-input *ngIf="control|async as ctrl" [type]="type" [formControl]="ctrl!" [attr.disabled]="readonly"></ion-input>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfInputFieldComponent),F=function(e){function o(n,t,a,o){return e.call(this,n,t,a,o)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<ng-container *ngIf="!(instance|ajfExpandFieldWithChoices:searchThreshold); else expanded">\n  <div class="ajf-item-container">\n    <ng-container *ngIf="instance.filteredChoices as cs">\n      <gic-select\n          #multipleChoiceSelect\n          *ngIf="control|async as ctrl"\n          [multiple]="true"\n          [searchBar]="instance|ajfSelectHasSearchBar:searchThreshold"\n          [useVirtualScroll]="instance|ajfSelectUseVirtualScroll:100"\n          [placeholder]="instance.node.label"\n          [formControl]="ctrl!"\n          [disabled]="readonly">\n        <gic-select-option *ngFor="let item of cs"\n            [value]="item.value">{{ item.label|translate }}</gic-select-option>\n      </gic-select>\n    </ng-container>\n  </div>\n</ng-container>\n<ng-template #expanded>\n  <div ajf-checkbox-group\n      *ngIf="control|async as ctrl"\n      [formControl]="ctrl!"\n      class="ajf-choices-container"\n  >\n    <ion-card  *ngFor="let choice of instance.filteredChoices">\n      <ajf-checkbox-group-item\n        [readonly]="readonly"\n        [value]="choice.value">\n        {{ choice.label | translate }}\n      </ajf-checkbox-group-item>\n    </ion-card>\n  </div>\n</ng-template>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h},{type:Number,decorators:[{type:a.Optional},{type:a.Inject,args:[t.AJF_SEARCH_ALERT_THRESHOLD]}]}]},o}(t.AjfFieldWithChoicesComponent),_=function(e){function o(n,t,o){var c=e.call(this,n,t,o)||this;return c._setValueEvt=new a.EventEmitter,c._setValueSub=i.Subscription.EMPTY,c.type="number",c.value=i.defer((function(){return c.control.pipe(r.filter((function(e){return null!=e})),r.switchMap((function(e){return e.valueChanges.pipe(r.startWith(e.value))})))})),c}return n.__extends(o,e),o.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this._setValueEvt.complete(),this._setValueSub.unsubscribe()},o.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this._setValueSub=this._setValueEvt.pipe(r.withLatestFrom(this.control)).subscribe((function(e){var t=n.__read(e,2),a=t[1];null!=a&&a.setValue(t[0])}))},o.prototype.setValue=function(e){try{e=parseFloat(""+e),isNaN(e)&&(e=null)}catch(n){e=null}this._setValueEvt.emit(e)},o.decorators=[{type:a.Component,args:[{template:'<ion-input [ngModel]="value|async" (ngModelChange)="setValue($event)" [readonly]="readonly"></ion-input>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfInputFieldComponent),A=function(e){function o(n,t,a,o){return e.call(this,n,t,a,o)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<ng-container *ngIf="!(instance|ajfExpandFieldWithChoices:searchThreshold); else expanded">\n  <div class="ajf-item-container">\n    <ng-container *ngIf="instance.filteredChoices as cs">\n      <gic-select *ngIf="control|async as ctrl"\n          #singleChoiceSelect\n          [disabled]="readonly"\n          [searchBar]="instance|ajfSelectHasSearchBar:searchThreshold"\n          [useVirtualScroll]="instance|ajfSelectUseVirtualScroll:100"\n          [placeholder]="instance.node.label"\n          [formControl]="ctrl!">\n        <gic-select-option *ngFor="let item of cs" [value]="item.value">{{ item.label|translate }}</gic-select-option>\n      </gic-select>\n    </ng-container>\n  </div>\n</ng-container>\n<ng-template #expanded>\n  <div class="ajf-choices-container">\n    <ion-radio-group\n      *ngIf="control|async as ctrl"\n      [formControl]="ctrl!">\n      <ion-item *ngFor="let choice of instance.filteredChoices">\n        <ion-label>{{ choice.label | translate }}</ion-label>\n        <ion-radio [disabled]="readonly" [value]="choice.value"></ion-radio>\n      </ion-item>\n    </ion-radio-group>\n  </div>\n</ng-template>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h},{type:Number,decorators:[{type:a.Optional},{type:a.Inject,args:[t.AJF_SEARCH_ALERT_THRESHOLD]}]}]},o}(t.AjfFieldWithChoicesComponent),D=function(e){function o(n,t,a){return e.call(this,n,t,a)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<div class="ajf-table-container">\n  <table>\n    <ng-container *ngFor="let columns of (instance|ajfTableVisibleColumns); let i = index">\n      <tr [ngClass]="i | ajfTableRowClass">\n        <td *ngFor="let cellValue of columns" >\n          {{ cellValue | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}\n        </td>\n      </tr>\n    </ng-container>\n  </table>\n</div>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["table.ajf-table-field{width:100%}\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfBaseFieldComponent),w=function(e){function o(n,t,a){return e.call(this,n,t,a)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<ion-textarea *ngIf="control|async as ctrl" [formControl]="ctrl!"></ion-textarea>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfBaseFieldComponent),M=function(e){function o(n,t,a){return e.call(this,n,t,a)||this}return n.__extends(o,e),o.decorators=[{type:a.Component,args:[{template:'<ajf-time *ngIf="control|async as ctrl" [formControl]="ctrl!" [readonly]="readonly"></ajf-time>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None,styles:["\n"]}]}],o.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:t.AjfFormRendererService},{type:h}]},o}(t.AjfBaseFieldComponent),P=function(e){function o(){var n=e.call(this)||this;return n.componentsMap[t.AjfFieldType.String]={component:S},n.componentsMap[t.AjfFieldType.Text]={component:w},n.componentsMap[t.AjfFieldType.Number]={component:_},n.componentsMap[t.AjfFieldType.Boolean]={component:y},n.componentsMap[t.AjfFieldType.Formula]={component:I},n.componentsMap[t.AjfFieldType.Date]={component:b},n.componentsMap[t.AjfFieldType.DateInput]={component:v},n.componentsMap[t.AjfFieldType.Table]={component:D},n.componentsMap[t.AjfFieldType.Empty]={component:C},n.componentsMap[t.AjfFieldType.SingleChoice]={component:A},n.componentsMap[t.AjfFieldType.MultipleChoice]={component:F},n.componentsMap[t.AjfFieldType.Time]={component:M},n.componentsMap[t.AjfFieldType.Barcode]={component:x},n}return n.__extends(o,e),o.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],o.ctorParameters=function(){return[]},o.ɵprov=a["ɵɵdefineInjectable"]({factory:function e(){return new o},token:o,providedIn:"root"}),o}(t.AjfFieldService),R=function(e){function t(n,t,a){var o=e.call(this,n,t)||this;return o.componentsMap=a.componentsMap,o}return n.__extends(t,e),t.decorators=[{type:a.Component,args:[{selector:"ajf-field,ajf-form-field",template:'<div\n    [ngClass]="\'ajf-field-\' + (instance|ajfNodeCompleteName)"\n    [class.ajf-validated]="instance.validationResults|ajfFieldIsValid"\n>\n  <ng-template ajf-field-host></ng-template>\n</div>\n<ng-container *ngIf="instance.node.attachments">\n  <ng-container *ngFor="let attachment of instance.node.attachments">\n    <a [href]="attachment.value" target="_blank">{{attachment.label}}</a>\n  </ng-container>\n</ng-container>\n<ng-container *ngIf="instance.validationResults">\n  <div class="ajf-errors">\n    <ng-container *ngFor="let res of instance.validationResults">\n      <div class="error" *ngIf="!res.result">\n        {{ res.error | translate }}\n      </div>\n    </ng-container>\n  </div>\n</ng-container>\n',encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush,styles:["ajf-field ion-select{position:relative}ajf-field ion-input,ajf-field ion-textarea{border:dashed 2px #eee}ajf-field .ajf-choices-container{flex-direction:row;align-items:stretch;flex-wrap:wrap;display:flex}ajf-field .ajf-choices-container>ion-radio-group{display:flex;flex-wrap:wrap}ajf-field .ajf-choices-container>ion-radio-group ion-item{--ion-item-border-color: transparent}ajf-field .ajf-choices-container>ion-radio-group ion-item ion-label{margin-right:10px}ajf-field .ajf-choices-container>ion-card{margin-top:0;width:33%;display:flex;font-size:13px;flex-wrap:wrap;flex-basis:21% !important;flex-shrink:3 !important}ajf-field .ajf-choices-container>ion-card>ajf-checkbox-group-item{width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:center}ajf-field .ajf-choices-container>ion-card>ion-item{font-size:13px;flex:1 0 auto;flex-shrink:3 !important;flex-basis:21% !important;margin:0 10px}ajf-field .ajf-item-container{position:relative}ajf-field .ajf-errors{font-style:italic;padding:5px}ajf-field tr.ajf-row-odd{background-color:gray}ajf-field .ajf-table-container{overflow-x:auto}ajf-field .ajf-table-container table{width:100%}\n"]}]}],t.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:a.ComponentFactoryResolver},{type:P}]},t}(t.AjfFormField),E=function(e){function o(n,t){var o=e.call(this,n,t)||this;return o._longSlide=!1,o._viewInitEvt=new a.EventEmitter,o._scrollFinishSub=i.Subscription.EMPTY,o._scrollFinishSub=o._viewInitEvt.pipe(r.delayWhen((function(){return o.formGroup})),r.switchMap((function(){return o.formSlider.pageScrollFinish}))).subscribe((function(e){return o._updateLongSlide()})),o}return n.__extends(o,e),Object.defineProperty(o.prototype,"longSlide",{get:function(){return this._longSlide},enumerable:!0,configurable:!0}),o.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),this._viewInitEvt.emit()},o.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this._scrollFinishSub.unsubscribe()},o.prototype._updateLongSlide=function(){var e=this.formSlider.isCurrentPageLong();e!==this._longSlide&&(this._longSlide=e,this._changeDetectorRef.markForCheck())},o.decorators=[{type:a.Component,args:[{selector:"ajf-form",template:'<ng-container *ngIf="formGroup|async as currentFormGroup">\n  <form novalidate [formGroup]="currentFormGroup!">\n    <div class="ajf-form-container">\n      <ion-toolbar *ngIf="!hideTopToolbar">\n        {{ title | translate }}\n        <ion-buttons slot="end">\n          <ion-button *ngIf="!saveDisabled" (click)="onSave($event)">{{ \'Save\' | translate }}</ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n      <div class="ajf-slider-container">\n        <ajf-page-slider (orientationChange)="orientationChangeHandler($event)"\n            [hideNavigationButtons]="hideNavigationButtons"\n            [fixedOrientation]="fixedOrientation"\n            [orientation]="orientation"\n            #formSlider>\n          <ng-container *ngIf="(slides|async) as curSlides">\n            <ng-container *ngIf="curSlides && curSlides!.length > 0 && hasStartMessage">\n              <ajf-page-slider-item>\n                <div ajfFormPage class="ajf-form-page">\n                  <ion-card>\n                    <ion-card-header>\n                      <div class="ajf-page-slider-item-header">\n                        <h2>\n                          <span class="ajf-form-header-number">\n                            1  &rarr;\n                          </span>\n                          <span class="ajf-title">\n                            <ng-content select="[ajfFormStartMessageTitle]"></ng-content>\n                          </span>\n                        </h2>\n                      </div>\n                    </ion-card-header>\n                    <ion-card-content>\n                      <ng-content select="[ajfFormStartMessage]"></ng-content>\n                    </ion-card-content>\n                  </ion-card>\n                </div>\n              </ajf-page-slider-item>\n            </ng-container>\n            <ng-container *ngFor="let slideInstance of curSlides; trackBy: trackNodeById">\n              <ng-container *ngIf="(!(slideInstance|ajfIsRepeatingSlideInstance)) && slideInstance.visible">\n                <ajf-page-slider-item>\n                  <div ajfFormPage class="ajf-form-page">\n                    <ion-card>\n                      <ion-card-header>\n                        <div class="ajf-page-slider-item-header">\n                          <h2>\n                            <span class="ajf-form-header-number">{{ slideInstance.position + (hasStartMessage | ajfBoolToInt) }} &rarr;</span>\n                            <span class="ajf-title">{{ slideInstance.node.label | translate}}</span>\n                          </h2>\n                          <ion-icon color="danger" name="warning" *ngIf="!slideInstance.valid"></ion-icon>\n                          <ion-icon color="secondary" name="checkmark" *ngIf="slideInstance.valid"></ion-icon>\n                        </div>\n                      </ion-card-header>\n                      <ion-card-content>\n                        <ng-container *ngFor="let fieldInstance of slideInstance.flatNodes; trackBy: trackNodeById">\n                          <div [ngClass]="\'ajf-\' + (fieldInstance|ajfAsFieldInstance).node.size" class="ajf-field-entry"\n                              *ngIf="fieldInstance.visible">\n                            <i [class]="(fieldInstance|ajfAsFieldInstance).node.fieldType | ajfFieldIcon" item-right></i>\n                            <p>{{ (fieldInstance|ajfAsFieldInstance).node.description }}</p>\n                            <ion-label [innerHTML]="fieldInstance.node.label | translate"></ion-label>\n                            <ajf-field [instance]="fieldInstance|ajfAsFieldInstance" [readonly]="readonly"></ajf-field>\n                          </div>\n                        </ng-container>\n                      </ion-card-content>\n                    </ion-card>\n                  </div>\n                </ajf-page-slider-item>\n              </ng-container>\n              <ng-container *ngIf="(slideInstance|ajfIsRepeatingSlideInstance) && slideInstance.visible">\n                <ajf-page-slider-item *ngFor="let curRep of ((slideInstance|ajfAsRepeatingSlideInstance).reps|ajfRange); let idx = index; let lastSlide = last">\n                  <div ajfFormPage class="ajf-form-page">\n                    <ion-card>\n                      <ion-card-header>\n                        <div class="ajf-page-slider-item-header">\n                          <h2>\n                            <span class="ajf-form-header-number">{{ slideInstance.position|ajfIncrement:idx }} &rarr;</span>\n                            <span class="ajf-title">{{ slideInstance.node.label | translate }}</span>\n                          </h2>\n                          <ion-icon color="danger" name="ajf-warning" *ngIf="!(slideInstance|ajfValidSlide:idx)"></ion-icon>\n                          <ion-icon color="secondary" name="checkmark" *ngIf="(slideInstance|ajfValidSlide:idx)"></ion-icon>\n                        </div>\n                        <div *ngIf="lastSlide" class="ajf-group-actions">\n                          <ion-fab-button size="small" (click)="addGroup(slideInstance)" [disabled]="!(slideInstance|ajfAsRepeatingSlideInstance).canAdd">\n                            <ion-icon name="add"></ion-icon>\n                          </ion-fab-button>\n                          <ion-fab-button size="small" (click)="removeGroup(slideInstance)" [disabled]="!(slideInstance|ajfAsRepeatingSlideInstance).canRemove">\n                            <ion-icon name="remove"></ion-icon>\n                          </ion-fab-button>\n                        </div>\n                      </ion-card-header>\n                      <ion-card-content>\n                        <ng-container *ngFor="let fieldInstance of slideInstance.slideNodes[idx]; trackBy: trackNodeById">\n                          <div [ngClass]="\'ajf-\' + (fieldInstance|ajfAsFieldInstance).node.size" class="ajf-field-entry"\n                              *ngIf="fieldInstance.visible">\n                            <i [class]="(fieldInstance|ajfAsFieldInstance).node.fieldType | ajfFieldIcon" item-right></i>\n                            <p>{{ (fieldInstance|ajfAsFieldInstance).node.description }}</p>\n                            <ion-label [innerHTML]="fieldInstance.node.label | translate"></ion-label>\n                            <ajf-field [instance]="fieldInstance|ajfAsFieldInstance" [readonly]="readonly"></ajf-field>\n                          </div>\n                        </ng-container>\n                        <div *ngIf="lastSlide && longSlide" class="ajf-group-actions ajf-group-actions-bottom">\n                          <ion-fab-button size="small" (click)="addGroup(slideInstance)" [disabled]="!(slideInstance|ajfAsRepeatingSlideInstance).canAdd" mat-mini-fab>\n                            <ion-icon name="add"></ion-icon>\n                          </ion-fab-button>\n                          <ion-fab-button size="small" (click)="removeGroup(slideInstance)" [disabled]="!(slideInstance|ajfAsRepeatingSlideInstance).canRemove" mat-mini-fab>\n                            <ion-icon name="remove"></ion-icon>\n                          </ion-fab-button>\n                        </div>\n                      </ion-card-content>\n                    </ion-card>\n                  </div>\n                </ajf-page-slider-item>\n              </ng-container>\n            </ng-container>\n            <ng-container *ngIf="curSlides && curSlides!.length > 0 && hasEndMessage">\n              <ajf-page-slider-item>\n                <div ajfFormPage class="ajf-form-page">\n                  <ion-card>\n                    <ion-card-header>\n                      <div class="ajf-page-slider-item-header">\n                        <h2>\n                          <span *ngIf="(slidesNum|async) as snum" class="ajf-form-header-number">\n                            {{ snum! + (hasStartMessage | ajfBoolToInt) + 1 }} &rarr;\n                          </span>\n                          <span class="ajf-title">\n                            <ng-content select="[ajfFormEndMessageTitle]"></ng-content>\n                          </span>\n                        </h2>\n                      </div>\n                    </ion-card-header>\n                    <ion-card-content>\n                      <ng-content select="[ajfFormEndMessage]"></ng-content>\n                    </ion-card-content>\n                  </ion-card>\n                </div>\n              </ajf-page-slider-item>\n            </ng-container>\n          </ng-container>\n          <div ajfPageSliderBar *ngIf="!hideBottomToolbar">\n            <div class="ajf-left-bar">\n              <ion-buttons class="ajf-errors" *ngIf="((errors | async) || 0) > 0">\n                <ion-button (click)="goToPrevError()" color="danger">\n                  <ion-icon name="arrow-up"></ion-icon>\n                </ion-button>\n                <ion-button (click)="goToNextError()" color="danger">\n                  <ion-icon name="arrow-down"></ion-icon>\n                </ion-button>\n              </ion-buttons>\n              <div class="ajf-info-box ajf-error">\n                <div class="ajf-title" translate>\n                  Errors\n                </div>\n                <div class="ajf-content">\n                  {{ errors | async }} / {{ slidesNum|async }}\n                </div>\n              </div>\n            </div>\n          </div>\n        </ajf-page-slider>\n      </div>\n    </div>\n  </form>\n</ng-container>\n',encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush,styles:["ajf-form{display:block;position:relative}ajf-form form{display:block;position:absolute;top:0;right:0;bottom:0;left:0}ajf-form form .ajf-form-container{display:flex;flex-direction:column;height:100%}ajf-form form .ajf-form-container ion-toolbar{flex:0 0 auto;height:56px}ajf-form form .ajf-form-container ion-toolbar.ajf-hidden{opacity:0}ajf-form form .ajf-form-container>.ajf-slider-container{flex:1 1 auto;position:relative;height:calc(100% - 56px)}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider{height:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content{padding:16px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page{flex:1;max-height:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card{flex:1;margin-bottom:2em}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header{overflow:visible !important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header .ajf-group-actions{position:absolute;left:calc(100vw - 160px - 6em);width:160px;margin-top:-2em;padding:15px;z-index:10;white-space:nowrap;overflow:visible !important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-header .ajf-group-actions ion-fab-button{display:inline-block;overflow:visible !important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content{display:flex;flex-wrap:wrap;flex-direction:row;align-content:flex-start;position:relative}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content .ajf-group-actions-bottom{width:100%;text-align:right;overflow:visible !important}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content .ajf-group-actions-bottom ion-fab-button{overflow:visible !important;display:inline-block}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry{flex:1 0 auto;padding-left:10px;padding-right:10px;width:100%;box-sizing:border-box}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-normal{width:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-small{width:50%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-smaller{width:33%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-tiny{width:25%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider ajf-page-slider-item .ajf-page-slider-item-content .ajf-form-page>ion-card>ion-card-content>.ajf-field-entry.ajf-mini{width:20%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header{display:flex;align-items:center;width:100%}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2{flex:1}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2>.ajf-form-header-number{margin-right:.5em}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider .ajf-page-slider-item-header>h2>.ajf-title{display:inline-block;margin-right:40px;white-space:normal;vertical-align:top}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar{display:flex;align-items:flex-start;flex-direction:row;position:absolute;bottom:0}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar ion-buttons.ajf-errors{order:1;color:red}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box{height:40px;padding:4px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box>div{height:16px;line-height:16px}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box>div.ajf-content{font-weight:bold}ajf-form form .ajf-form-container>.ajf-slider-container>ajf-page-slider [ajfPageSliderBar] .ajf-left-bar .ajf-info-box.ajf-error{order:2;color:red}ajf-form form .ajf-form-container .ajf-spacer{flex:1 0 auto}\n"]}]}],o.ctorParameters=function(){return[{type:t.AjfFormRendererService},{type:a.ChangeDetectorRef}]},o}(t.AjfFormRenderer),T=function(){function e(){}return e.decorators=[{type:a.Directive,args:[{selector:"[ajfFormPage]"}]}],e}(),V=function(){function e(){}return e.prototype.transform=function(e,n){return e.filteredChoices&&e.filteredChoices.length>n},e.decorators=[{type:a.Pipe,args:[{name:"ajfSelectHasSearchBar"}]}],e}(),k=function(){function e(){}return e.prototype.transform=function(e,n){return e.filteredChoices&&e.filteredChoices.length>n},e.decorators=[{type:a.Pipe,args:[{name:"ajfSelectUseVirtualScroll"}]}],e}(),B=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[P]}},e.decorators=[{type:a.NgModule,args:[{imports:[c.CommonModule,l.FormsModule,l.ReactiveFormsModule,o.IonicModule,s.GicModule,f.TranslateModule,d.AjfCommonModule,t.AjfFormsModule,m.AjfCalendarModule,p.AjfBarcodeModule,g.AjfCheckboxGroupModule,u.AjfPageSliderModule,j.AjfTimeModule],declarations:[x,y,b,v,C,R,T,E,I,S,F,_,V,k,A,D,w,M],entryComponents:[x,y,b,v,C,I,S,F,_,A,D,w,M],exports:[R,E],providers:[P,h]}]}],e}();
/**
     * @license
     * Copyright (C) 2018 Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) 2018 Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
e.AjfBooleanFieldComponent=y,e.AjfDateFieldComponent=b,e.AjfDateInputFieldComponent=v,e.AjfEmptyFieldComponent=C,e.AjfFieldService=P,e.AjfFormField=R,e.AjfFormRenderer=E,e.AjfFormsModule=B,e.AjfInputFieldComponent=S,e.AjfMultipleChoiceFieldComponent=F,e.AjfNumberFieldComponent=_,e.AjfSingleChoiceFieldComponent=A,e.AjfTableFieldComponent=D,e.AjfTextareaFieldComponent=w,e.AjfTimeFieldComponent=M,e.AjfWarningAlertService=h,e.ɵajf_src_ionic_forms_forms_a=x,e.ɵajf_src_ionic_forms_forms_b=T,e.ɵajf_src_ionic_forms_forms_c=I,e.ɵajf_src_ionic_forms_forms_d=V,e.ɵajf_src_ionic_forms_forms_e=k,Object.defineProperty(e,"__esModule",{value:!0})}));