{"version":3,"file":"ionic-page-slider.umd.js","sources":["../../../../../../src/ionic/page-slider/page-slider.ts","../../../../../../src/ionic/page-slider/page-slider-module.ts","../../../../../../src/ionic/page-slider/public-api.ts","../../../../../../src/ionic/page-slider/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfPageSlider as AjfCorePageSlider} from '@ajf/core/page-slider';\nimport {AnimationBuilder} from '@angular/animations';\nimport {BooleanInput} from '@angular/cdk/coercion';\nimport {AfterContentInit, ChangeDetectionStrategy, ChangeDetectorRef, Component,\n  ElementRef, OnDestroy, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {merge, Subscription} from 'rxjs';\nimport {filter, map, startWith, switchMap} from 'rxjs/operators';\n\n@Component({\n  selector: 'ajf-page-slider',\n  templateUrl: 'page-slider.html',\n  styleUrls: ['page-slider.css'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AjfPageSlider extends AjfCorePageSlider implements AfterContentInit, OnDestroy {\n  private _scrollSub = Subscription.EMPTY;\n\n  constructor(\n    animationBuilder: AnimationBuilder,\n    cdr: ChangeDetectorRef,\n    renderer: Renderer2,\n    private _el: ElementRef,\n  ) {\n    super(animationBuilder, cdr, renderer);\n  }\n\n  ngAfterContentInit(): void {\n    super.ngAfterContentInit();\n    this._scrollSub = this.pages.changes.pipe(\n      map(() => this.pages.toArray()),\n      startWith(this.pages.toArray()),\n      filter(pages => pages.length > 0),\n      switchMap(pages => merge(...pages.map(page => page.scroll))),\n    ).subscribe(() => {\n      this._fixRippleFromRadioButton();\n      this._fixToggleButtons();\n    });\n  }\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n    this._scrollSub.unsubscribe();\n  }\n\n  private _fixRippleFromRadioButton(): void {\n    try {\n      const el = this._el.nativeElement as HTMLElement;\n      const radioGroups = el.getElementsByTagName('ion-radio-group');\n      const radioGroup = radioGroups[0];\n      const items = radioGroup.getElementsByTagName('ion-item');\n      const item = items[0];\n      const ripples = item.shadowRoot!.firstElementChild!\n        .getElementsByTagName('ion-ripple-effect');\n      const ripple = ripples.item(0) as HTMLIonRippleEffectElement;\n      const orig = ripple.style.opacity;\n      ripple.style.opacity = '0';\n      ripple.addRipple(0, 0).then(remove => {\n        remove();\n        ripple.style.opacity = orig;\n      });\n    } catch (e) { }\n  }\n\n  private _fixToggleButtons(): void {\n    try {\n      const el = this._el.nativeElement as HTMLElement;\n      const toggleButtons = el.getElementsByTagName('ion-toggle');\n      const toggleButtonsNum = toggleButtons.length;\n      for (let i = 0; i < toggleButtonsNum; i++) {\n        const toggleButton = toggleButtons.item(i) as HTMLIonToggleElement;\n        const inners = toggleButton.shadowRoot!.firstElementChild!\n          .getElementsByClassName('toggle-inner');\n        const inner = inners[0] as HTMLDivElement;\n        inner.setAttribute('style', 'will-change: auto');\n        setTimeout(() => {\n          try {\n            inner.removeAttribute('style');\n          } catch (e) { }\n        }, 0);\n      }\n    } catch (e) { }\n  }\n\n  static ngAcceptInputType_fixedOrientation: BooleanInput;\n  static ngAcceptInputType_hideNavigationButtons: BooleanInput;\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {AjfPageSliderModule as AjfCorePageSliderModule} from '@ajf/core/page-slider';\n\nimport {AjfPageSlider} from './page-slider';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    AjfCorePageSliderModule\n  ],\n  declarations: [\n    AjfPageSlider\n  ],\n  exports: [\n    AjfCorePageSliderModule,\n    AjfPageSlider\n  ]\n})\nexport class AjfPageSliderModule { }\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport * from './page-slider';\nexport * from './page-slider-module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["__extends","Subscription","map","startWith","filter","switchMap","merge","Component","ViewEncapsulation","ChangeDetectionStrategy","AnimationBuilder","ChangeDetectorRef","Renderer2","ElementRef","AjfCorePageSlider","NgModule","CommonModule","IonicModule","AjfCorePageSliderModule"],"mappings":"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"}